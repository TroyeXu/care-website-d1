import{ac as e,X as a,w as l,x as n,Y as t,ae as o,G as u,o as r,a0 as s}from"../build/server.mjs";import{e as i,az as d,aC as c,n as v,bf as f}from"../nitro/nitro.mjs";function useRefocusTarget(e,a){const l=i(null);return{refocusTargetEl:d((()=>!0===e.disable?null:c("span",{ref:l,class:"no-outline",tabindex:-1}))),refocusTarget:function(e){const n=a.value;!0!==e?.qAvoidFocus&&(0===e?.type.indexOf("key")?document.activeElement!==n&&!0===n?.contains(document.activeElement)&&n.focus():null===l.value||void 0!==e&&!0!==n?.contains(e.target)||l.value.focus())}}}const g={xs:30,sm:35,md:40,lg:50,xl:60},m={...l,...a,...e,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>"tf"===e||"ft"===e},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},b=["update:modelValue"];function useCheckbox(e,a){const{props:l,slots:m,emit:b,proxy:p}=v(),{$q:k}=p,y=n(l,k),V=i(null),{refocusTargetEl:h,refocusTarget:x}=useRefocusTarget(l,V),C=t(l,g),q=d((()=>void 0!==l.val&&Array.isArray(l.modelValue))),$=d((()=>{const e=f(l.val);return!0===q.value?l.modelValue.findIndex((a=>f(a)===e)):-1})),_=d((()=>!0===q.value?-1!==$.value:f(l.modelValue)===f(l.trueValue))),w=d((()=>!0===q.value?-1===$.value:f(l.modelValue)===f(l.falseValue))),I=d((()=>!1===_.value&&!1===w.value)),O=d((()=>!0===l.disable?-1:l.tabindex||0)),S=d((()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(!0===l.disable?" disabled":"")+(!0===y.value?` q-${e}--dark`:"")+(!0===l.dense?` q-${e}--dense`:"")+(!0===l.leftLabel?" reverse":""))),T=d((()=>{const a=!0===_.value?"truthy":!0===w.value?"falsy":"indet",n=void 0===l.color||!0!==l.keepColor&&("toggle"===e?!0!==_.value:!0===w.value)?"":` text-${l.color}`;return`q-${e}__inner relative-position non-selectable q-${e}__inner--${a}${n}`})),K=d((()=>{const e={type:"checkbox"};return void 0!==l.name&&Object.assign(e,{".checked":_.value,"^checked":!0===_.value?"checked":void 0,name:l.name,value:!0===q.value?l.val:l.trueValue}),e})),B=o(K),j=d((()=>{const a={tabindex:O.value,role:"toggle"===e?"switch":"checkbox","aria-label":l.label,"aria-checked":!0===I.value?"mixed":!0===_.value?"true":"false"};return!0===l.disable&&(a["aria-disabled"]="true"),a}));function onClick(e){void 0!==e&&(s(e),x(e)),!0!==l.disable&&b("update:modelValue",function(){if(!0===q.value){if(!0===_.value){const e=l.modelValue.slice();return e.splice($.value,1),e}return l.modelValue.concat([l.val])}if(!0===_.value){if("ft"!==l.toggleOrder||!1===l.toggleIndeterminate)return l.falseValue}else{if(!0!==w.value)return"ft"!==l.toggleOrder?l.trueValue:l.falseValue;if("ft"===l.toggleOrder||!1===l.toggleIndeterminate)return l.trueValue}return l.indeterminateValue}(),e)}function onKeydown(e){13!==e.keyCode&&32!==e.keyCode||s(e)}function onKeyup(e){13!==e.keyCode&&32!==e.keyCode||onClick(e)}const E=a(_,I);return Object.assign(p,{toggle:onClick}),()=>{const a=E();!0!==l.disable&&B(a,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const n=[c("div",{class:T.value,style:C.value,"aria-hidden":"true"},a)];null!==h.value&&n.push(h.value);const t=void 0!==l.label?u(m.default,[l.label]):r(m.default);return void 0!==t&&n.push(c("div",{class:`q-${e}__label q-anchor--skip`},t)),c("div",{ref:V,class:S.value,...j.value,onClick:onClick,onKeydown:onKeydown,onKeyup:onKeyup},n)}}export{m as a,useCheckbox as b,useRefocusTarget as c,g as o,b as u};
//# sourceMappingURL=use-checkbox.mjs.map
