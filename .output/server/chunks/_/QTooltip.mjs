import{v as e,a as t,f as a,p as o,b as i,c as n,d as s,r as l,s as r,g as u}from"./position-engine.mjs";import{n as c,I as d,s as p,av as h,J as m,aw as f,B as v,ax as g,L as y,ay as b,aR as S,aQ as w,r as T,a0 as P}from"../build/server.mjs";import{n as x,e as E,az as H,aG as O,o as j}from"../nitro/nitro.mjs";const C=c({name:"QTooltip",inheritAttrs:!1,props:{...a,...m,...h,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...h.transitionShow,default:"jump-down"},transitionHide:{...h.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:t},self:{type:String,default:"top middle",validator:t},offset:{type:Array,default:()=>[14,14],validator:e},scrollTarget:p,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...d],setup(e,{slots:t,emit:a,attrs:c}){let d,p;const h=x(),{proxy:{$q:m}}=h,C=E(null),k=E(!1),D=H((()=>o(e.anchor,m.lang.rtl))),L=H((()=>o(e.self,m.lang.rtl))),A=H((()=>!0!==e.persistent)),{registerTick:R,removeTick:W}=f(),{registerTimeout:_}=v();g(e);const{localScrollTarget:q,changeScrollEvent:B,unconfigureScrollTarget:M}=i(e,configureScrollTarget),{anchorEl:N,canShow:Q,anchorEvents:z}=n({showing:k,configureAnchorEl:function(){if(!0===e.noParentEvent||null===N.value)return;const t=!0===m.platform.is.mobile?[[N.value,"touchstart","delayShow","passive"]]:[[N.value,"mouseenter","delayShow","passive"],[N.value,"mouseleave","delayHide","passive"]];w(z,"anchor",t)}}),{show:G,hide:I}=y({showing:k,canShow:Q,handleShow:function(t){J(),R((()=>{p=new MutationObserver((()=>updatePosition())),p.observe(C.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),updatePosition(),configureScrollTarget()})),void 0===d&&(d=O((()=>m.screen.width+"|"+m.screen.height+"|"+e.self+"|"+e.anchor+"|"+m.lang.rtl),updatePosition));_((()=>{J(!0),a("show",t)}),e.transitionDuration)},handleHide:function(t){W(),V(),anchorCleanup(),_((()=>{V(!0),a("hide",t)}),e.transitionDuration)},hideOnRouteChange:A,processOnMount:!0});Object.assign(z,{delayShow:function(t){if(!0===m.platform.is.mobile){u(),document.body.classList.add("non-selectable");const e=N.value,t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"delayHide","passiveCapture"]));w(z,"tooltipTemp",t)}_((()=>{G(t)}),e.delay)},delayHide:function(t){!0===m.platform.is.mobile&&(S(z,"tooltipTemp"),u(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10));_((()=>{I(t)}),e.hideDelay)}});const{showPortal:J,hidePortal:V,renderPortal:$}=b();if(!0===m.platform.is.mobile){const t={anchorEl:N,innerRef:C,onClickOutside:e=>(I(e),e.target.classList.contains("q-dialog__backdrop")&&P(e),!0)},a=H((()=>null===e.modelValue&&!0!==e.persistent&&!0===k.value));O(a,(e=>{(!0===e?s:l)(t)})),j((()=>{l(t)}))}function anchorCleanup(){void 0!==p&&(p.disconnect(),p=void 0),void 0!==d&&(d(),d=void 0),M(),S(z,"tooltipTemp")}function updatePosition(){r({targetEl:C.value,offset:e.offset,anchorEl:N.value,anchorOrigin:D.value,selfOrigin:L.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function configureScrollTarget(){if(null!==N.value||void 0!==e.scrollTarget){q.value=T(N.value,e.scrollTarget);const t=!0===e.noParentEvent?updatePosition:I;B(q.value,t)}}return j(anchorCleanup),Object.assign(h.proxy,{updatePosition:updatePosition}),$}});export{C as _};
//# sourceMappingURL=QTooltip.mjs.map
