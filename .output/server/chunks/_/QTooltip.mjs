import{v as e,a as t,u as a,p as o,b as i,c as n,d as s,r as l,s as r,e as u}from"./position-engine.mjs";import{c,g as d,E as p,an as h,i as m,ao as f,L as v,ap as g,l as y,aq as b,ar as S,as as w,H as T,r as P}from"../build/server.mjs";import{n as E,e as H,az as x,aG as O,o as j}from"../nitro/nitro.mjs";const C=c({name:"QTooltip",inheritAttrs:!1,props:{...a,...m,...h,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...h.transitionShow,default:"jump-down"},transitionHide:{...h.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:t},self:{type:String,default:"top middle",validator:t},offset:{type:Array,default:()=>[14,14],validator:e},scrollTarget:p,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...d],setup(e,{slots:t,emit:a,attrs:c}){let d,p;const h=E(),{proxy:{$q:m}}=h,C=H(null),k=H(!1),D=x((()=>o(e.anchor,m.lang.rtl))),L=x((()=>o(e.self,m.lang.rtl))),q=x((()=>!0!==e.persistent)),{registerTick:A,removeTick:W}=f(),{registerTimeout:_}=v();g(e);const{localScrollTarget:M,changeScrollEvent:N,unconfigureScrollTarget:R}=i(e,configureScrollTarget),{anchorEl:z,canShow:B,anchorEvents:G}=n({showing:k,configureAnchorEl:function(){if(!0===e.noParentEvent||null===z.value)return;const t=!0===m.platform.is.mobile?[[z.value,"touchstart","delayShow","passive"]]:[[z.value,"mouseenter","delayShow","passive"],[z.value,"mouseleave","delayHide","passive"]];w(G,"anchor",t)}}),{show:Q,hide:V}=y({showing:k,canShow:B,handleShow:function(t){$(),A((()=>{p=new MutationObserver((()=>updatePosition())),p.observe(C.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),updatePosition(),configureScrollTarget()})),void 0===d&&(d=O((()=>m.screen.width+"|"+m.screen.height+"|"+e.self+"|"+e.anchor+"|"+m.lang.rtl),updatePosition));_((()=>{$(!0),a("show",t)}),e.transitionDuration)},handleHide:function(t){W(),F(),anchorCleanup(),_((()=>{F(!0),a("hide",t)}),e.transitionDuration)},hideOnRouteChange:q,processOnMount:!0});Object.assign(G,{delayShow:function(t){if(!0===m.platform.is.mobile){u(),document.body.classList.add("non-selectable");const e=z.value,t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"delayHide","passiveCapture"]));w(G,"tooltipTemp",t)}_((()=>{Q(t)}),e.delay)},delayHide:function(t){!0===m.platform.is.mobile&&(S(G,"tooltipTemp"),u(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10));_((()=>{V(t)}),e.hideDelay)}});const{showPortal:$,hidePortal:F,renderPortal:I}=b();if(!0===m.platform.is.mobile){const t={anchorEl:z,innerRef:C,onClickOutside:e=>(V(e),e.target.classList.contains("q-dialog__backdrop")&&P(e),!0)},a=x((()=>null===e.modelValue&&!0!==e.persistent&&!0===k.value));O(a,(e=>{(!0===e?s:l)(t)})),j((()=>{l(t)}))}function anchorCleanup(){void 0!==p&&(p.disconnect(),p=void 0),void 0!==d&&(d(),d=void 0),R(),S(G,"tooltipTemp")}function updatePosition(){r({targetEl:C.value,offset:e.offset,anchorEl:z.value,anchorOrigin:D.value,selfOrigin:L.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function configureScrollTarget(){if(null!==z.value||void 0!==e.scrollTarget){M.value=T(z.value,e.scrollTarget);const t=!0===e.noParentEvent?updatePosition:V;N(M.value,t)}}return j(anchorCleanup),Object.assign(h.proxy,{updatePosition:updatePosition}),I}});export{C as _};
//# sourceMappingURL=QTooltip.mjs.map
