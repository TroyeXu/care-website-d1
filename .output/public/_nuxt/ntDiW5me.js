import{_ as T}from"./BJJNLa36.js";import{v as F,u as q,A as g,a1 as J,J as i,o as u,e,a as O,ae as m,C as v,t as a,am as S,aj as d,an as p,K as V,L as h,ao as I,ap as z,_ as E}from"./DLx3-ifv.js";import{u as $}from"./Bs_-0E3x.js";const j={class:"api-demo"},G={class:"container"},H={key:0,class:"loading"},K={key:1,class:"error"},Y={class:"demo-section"},Q={class:"form-group"},W={class:"form-group"},X=["disabled"],Z={key:0,class:"result"},ee={class:"demo-section"},te={class:"test-actions"},se=["disabled"],le=["disabled"],oe=["disabled"],ne={key:0,class:"result"},ae={class:"caregiver-grid"},re={class:"demo-section"},ie={class:"form-group"},ue=["value"],de={class:"form-group"},ve={class:"form-group"},me={class:"form-group"},pe={class:"form-group"},ge={class:"form-group"},ce=["disabled"],be={key:0,class:"result"},_e={class:"demo-section"},ye={class:"form-group"},fe={class:"form-group"},ke={class:"form-group"},Ce={key:0,class:"card-details"},we={class:"form-group"},Se={class:"form-group"},Ve=["disabled"],he={key:0,class:"result"},Ie={class:"demo-section"},Ue=["disabled"],De={key:0,class:"result"},Le={class:"stats-grid"},Ne={class:"stat-card"},Ae={class:"stat-number"},Me={class:"stat-card"},xe={class:"stat-number"},Be={class:"stat-card"},Pe={class:"stat-number"},Re={class:"stat-card"},Te={class:"stat-number"},Fe={key:0,class:"favorite-caregiver"},qe={class:"demo-section"},Je=["disabled"],Oe={key:0,class:"result"},ze={class:"performance-table"},Ee=F({__name:"api-demo",setup($e){q("Mock API 演示 - DogFriend","Mock API 功能測試和演示頁面");const n=$({useMockApi:!0}),b=g({email:"zhiming.lin@email.com",password:"password123"}),o=g({caregiver_id:"",service_type:"hourly",start_date:"",end_date:"",start_time:"09:00",end_time:"17:00",special_requests:""}),r=g({bookingId:"booking-001",amount:2240,method:"credit_card",cardNumber:"1234567890123456",cvv:"123"}),f=g(null),_=g([]),k=g(null),C=g(null),c=g(null),y=g([]),D=async()=>{try{const l=await n.login(b.value.email,b.value.password);f.value=l}catch(l){console.error("登入測試失敗:",l)}},U=async()=>{try{const l=await n.getCaregivers(1,10);_.value=l.data?l.data.data:l}catch(l){console.error("載入看護師列表失敗:",l)}},L=async()=>{try{const l=await n.searchCaregivers("失智症");_.value=l}catch(l){console.error("搜尋看護師失敗:",l)}},N=async()=>{try{const l=await n.filterCaregivers({location:"台北市",minRating:4.5,maxHourlyRate:300});_.value=l}catch(l){console.error("篩選看護師失敗:",l)}},A=async()=>{try{o.value.start_date||(o.value.start_date=new Date().toISOString().split("T")[0]),o.value.end_date||(o.value.end_date=o.value.start_date);const l={caregiver_id:parseInt(o.value.caregiver_id),user_id:"user-001",service_type:o.value.service_type,start_date:o.value.start_date,end_date:o.value.end_date,start_time:o.value.start_time,end_time:o.value.end_time,special_requests:o.value.special_requests,total_cost:2240,status:"pending",patient_info:{name:"測試用戶",age:45,gender:"男",medicalConditions:["糖尿病"],emergencyContact:"0912-345-678"}},t=await n.createBooking(l);k.value=t}catch(l){console.error("建立預約失敗:",l)}},M=async()=>{try{const l={bookingId:r.value.bookingId,amount:r.value.amount,method:r.value.method,cardDetails:r.value.method==="credit_card"?{number:r.value.cardNumber,cvv:r.value.cvv,expiryMonth:"12",expiryYear:"2025"}:void 0},t=await n.processPayment(l);C.value=t}catch(l){console.error("支付處理失敗:",l)}},x=async()=>{try{const l=await n.getDashboardStats("user-001");c.value=l}catch(l){console.error("載入儀表板統計失敗:",l)}},B=async()=>{const l=[{name:"載入看護師列表",fn:()=>n.getCaregivers()},{name:"搜尋看護師",fn:()=>n.searchCaregivers("專業")},{name:"載入用戶預約",fn:()=>n.getBookingsByUser("user-001")},{name:"儀表板統計",fn:()=>n.getDashboardStats("user-001")}];y.value=[];for(const t of l){const w=performance.now();let s=!0;try{await t.fn()}catch{s=!1}const P=performance.now(),R=Math.round(P-w);y.value.push({name:t.name,duration:R,success:s})}};return J(()=>{U()}),(l,t)=>{const w=T;return u(),i("div",j,[e("div",G,[t[50]||(t[50]=e("h1",null,"Mock API 演示頁面",-1)),O(w),v(n).isLoading.value?(u(),i("div",H,t[14]||(t[14]=[e("div",{class:"spinner"},null,-1),e("p",null,"載入中...",-1)]))):m("",!0),v(n).error.value?(u(),i("div",K,[t[15]||(t[15]=e("h3",null,"發生錯誤",-1)),e("p",null,a(v(n).error.value.message),1),e("button",{onClick:t[0]||(t[0]=s=>v(n).clearError())},"清除錯誤")])):m("",!0),e("div",Y,[t[19]||(t[19]=e("h2",null,"認證測試",-1)),e("form",{onSubmit:S(D,["prevent"]),class:"test-form"},[e("div",Q,[t[16]||(t[16]=e("label",null,"Email:",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>b.value.email=s),type:"email",placeholder:"zhiming.lin@email.com"},null,512),[[p,b.value.email]])]),e("div",W,[t[17]||(t[17]=e("label",null,"密碼:",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>b.value.password=s),type:"password",placeholder:"password123"},null,512),[[p,b.value.password]])]),e("button",{type:"submit",disabled:v(n).isLoading.value}," 測試登入 ",8,X)],32),f.value?(u(),i("div",Z,[t[18]||(t[18]=e("h3",null,"登入結果：",-1)),e("pre",null,a(JSON.stringify(f.value,null,2)),1)])):m("",!0)]),e("div",ee,[t[21]||(t[21]=e("h2",null,"看護師資料測試",-1)),e("div",te,[e("button",{onClick:U,disabled:v(n).isLoading.value}," 載入看護師列表 ",8,se),e("button",{onClick:L,disabled:v(n).isLoading.value}," 搜尋看護師 ",8,le),e("button",{onClick:N,disabled:v(n).isLoading.value}," 篩選看護師 ",8,oe)]),_.value?(u(),i("div",ne,[t[20]||(t[20]=e("h3",null,"看護師資料：",-1)),e("div",ae,[(u(!0),i(V,null,h(_.value,s=>(u(),i("div",{key:s.id,class:"caregiver-card"},[e("h4",null,a(s.name),1),e("p",null,"經驗："+a(s.experience),1),e("p",null,"評分："+a(s.rating)+"/5.0",1),e("p",null,"時薪：NT$ "+a(s.hourly_rate),1),e("p",null,"地點："+a(s.location),1)]))),128))])])):m("",!0)]),e("div",re,[t[31]||(t[31]=e("h2",null,"預約測試",-1)),e("form",{onSubmit:S(A,["prevent"]),class:"test-form"},[e("div",ie,[t[23]||(t[23]=e("label",null,"看護師ID:",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.caregiver_id=s)},[t[22]||(t[22]=e("option",{value:""},"選擇看護師",-1)),(u(!0),i(V,null,h(_.value,s=>(u(),i("option",{key:s.id,value:s.id},a(s.name),9,ue))),128))],512),[[I,o.value.caregiver_id]])]),e("div",de,[t[25]||(t[25]=e("label",null,"服務類型:",-1)),d(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.service_type=s)},t[24]||(t[24]=[e("option",{value:"hourly"},"按時計費",-1),e("option",{value:"shift"},"包班制",-1)]),512),[[I,o.value.service_type]])]),e("div",ve,[t[26]||(t[26]=e("label",null,"開始日期:",-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.start_date=s),type:"date"},null,512),[[p,o.value.start_date]])]),e("div",me,[t[27]||(t[27]=e("label",null,"開始時間:",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.start_time=s),type:"time"},null,512),[[p,o.value.start_time]])]),e("div",pe,[t[28]||(t[28]=e("label",null,"結束時間:",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.end_time=s),type:"time"},null,512),[[p,o.value.end_time]])]),e("div",ge,[t[29]||(t[29]=e("label",null,"特殊需求:",-1)),d(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.special_requests=s),placeholder:"請描述特殊需求..."},null,512),[[p,o.value.special_requests]])]),e("button",{type:"submit",disabled:v(n).isLoading.value}," 建立預約 ",8,ce)],32),k.value?(u(),i("div",be,[t[30]||(t[30]=e("h3",null,"預約結果：",-1)),e("pre",null,a(JSON.stringify(k.value,null,2)),1)])):m("",!0)]),e("div",_e,[t[39]||(t[39]=e("h2",null,"支付測試",-1)),e("form",{onSubmit:S(M,["prevent"]),class:"test-form"},[e("div",ye,[t[32]||(t[32]=e("label",null,"預約ID:",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>r.value.bookingId=s),placeholder:"booking-001"},null,512),[[p,r.value.bookingId]])]),e("div",fe,[t[33]||(t[33]=e("label",null,"金額:",-1)),d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>r.value.amount=s),type:"number",placeholder:"2240"},null,512),[[p,r.value.amount]])]),e("div",ke,[t[35]||(t[35]=e("label",null,"支付方式:",-1)),d(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>r.value.method=s)},t[34]||(t[34]=[e("option",{value:"credit_card"},"信用卡",-1),e("option",{value:"bank_transfer"},"銀行轉帳",-1),e("option",{value:"cash"},"現金",-1)]),512),[[I,r.value.method]])]),r.value.method==="credit_card"?(u(),i("div",Ce,[e("div",we,[t[36]||(t[36]=e("label",null,"卡號:",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>r.value.cardNumber=s),placeholder:"1234567890123456"},null,512),[[p,r.value.cardNumber]])]),e("div",Se,[t[37]||(t[37]=e("label",null,"CVV:",-1)),d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>r.value.cvv=s),placeholder:"123"},null,512),[[p,r.value.cvv]])])])):m("",!0),e("button",{type:"submit",disabled:v(n).isLoading.value}," 處理支付 ",8,Ve)],32),C.value?(u(),i("div",he,[t[38]||(t[38]=e("h3",null,"支付結果：",-1)),e("pre",null,a(JSON.stringify(C.value,null,2)),1)])):m("",!0)]),e("div",Ie,[t[46]||(t[46]=e("h2",null,"儀表板統計測試",-1)),e("button",{onClick:x,disabled:v(n).isLoading.value}," 載入儀表板統計 ",8,Ue),c.value?(u(),i("div",De,[t[45]||(t[45]=e("h3",null,"儀表板統計：",-1)),e("div",Le,[e("div",Ne,[t[40]||(t[40]=e("h4",null,"總預約數",-1)),e("p",Ae,a(c.value.totalBookings),1)]),e("div",Me,[t[41]||(t[41]=e("h4",null,"已完成預約",-1)),e("p",xe,a(c.value.completedBookings),1)]),e("div",Be,[t[42]||(t[42]=e("h4",null,"待確認預約",-1)),e("p",Pe,a(c.value.pendingBookings),1)]),e("div",Re,[t[43]||(t[43]=e("h4",null,"總花費",-1)),e("p",Te,"NT$ "+a(c.value.totalSpent.toLocaleString()),1)])]),c.value.favoriteCaregiver?(u(),i("div",Fe,[t[44]||(t[44]=e("h4",null,"最常預約的看護師：",-1)),e("p",null,a(c.value.favoriteCaregiver.name),1)])):m("",!0)])):m("",!0)]),e("div",qe,[t[49]||(t[49]=e("h2",null,"API 響應時間測試",-1)),e("button",{onClick:B,disabled:v(n).isLoading.value}," 測試 API 響應時間 ",8,Je),y.value.length>0?(u(),i("div",Oe,[t[48]||(t[48]=e("h3",null,"響應時間結果：",-1)),e("table",ze,[t[47]||(t[47]=e("thead",null,[e("tr",null,[e("th",null,"API 名稱"),e("th",null,"響應時間 (ms)"),e("th",null,"狀態")])],-1)),e("tbody",null,[(u(!0),i(V,null,h(y.value,s=>(u(),i("tr",{key:s.name},[e("td",null,a(s.name),1),e("td",null,a(s.duration),1),e("td",{class:z(s.success?"success":"error")},a(s.success?"成功":"失敗"),3)]))),128))])])])):m("",!0)])])])}}}),Ye=E(Ee,[["__scopeId","data-v-d7b556c1"]]);export{Ye as default};
