import{M as O,aq as se,ar as le,R as B,as as oe,T as ne,S as A,at as re,au as ie,j as H,a8 as ue,v as de,av as ce,y as _e,z as me,A as T,a1 as ve,ai as pe,q as fe,Z as ge,p as ye,c as h,o as i,w as a,J as p,a as e,e as l,t as r,f as be,l as o,b as xe,d as qe,ae as L,K as F,L as M,g as ke,h as he,i as we,k as Ce,C as J,al as D,m as $e,u as Se,_ as ze}from"./DLx3-ifv.js";import{u as Re}from"./Bs_-0E3x.js";import{_ as Te}from"./CRM3jVju.js";import{_ as Ae}from"./DEJKBJhL.js";import{_ as Be}from"./BFiq8LBz.js";import{_ as Ne}from"./DlcMHTQ2.js";import{_ as Ve}from"./CSiiy5fn.js";const Ie=["",!0],Le=O({name:"QBreadcrumbs",props:{...se,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:u=>["none","xs","sm","md","lg","xl"].includes(u),default:"sm"}},setup(u,{slots:y}){const b=le(u),w=B(()=>`flex items-center ${b.value}${u.gutter==="none"?"":` q-gutter-${u.gutter}`}`),C=B(()=>u.separatorColor?` text-${u.separatorColor}`:""),s=B(()=>` text-${u.activeColor}`);return()=>{if(y.default===void 0)return;const m=oe(ne(y.default));if(m.length===0)return;let x=1;const d=[],q=m.filter(c=>c.type?.name==="QBreadcrumbsEl").length,$=y.separator!==void 0?y.separator:()=>u.separator;return m.forEach(c=>{if(c.type?.name==="QBreadcrumbsEl"){const S=x<q,I=c.props!==null&&Ie.includes(c.props.disable),P=(S===!0?"":" q-breadcrumbs--last")+(I!==!0&&S===!0?s.value:"");x++,d.push(A("div",{class:`flex items-center${P}`},[c])),S===!0&&d.push(A("div",{class:"q-breadcrumbs__separator"+C.value},$()))}else d.push(c)}),A("div",{class:"q-breadcrumbs"},[A("div",{class:w.value},d)])}}}),De=O({name:"QBreadcrumbsEl",props:{...re,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(u,{slots:y}){const{linkTag:b,linkAttrs:w,linkClass:C,navigateOnClick:s}=ie(),m=B(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(u.disable!==!0?"q-link--focusable"+C.value:"q-breadcrumbs__el--disable"),...w.value,onClick:s})),x=B(()=>"q-breadcrumbs__el-icon"+(u.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const d=[];return u.icon!==void 0&&d.push(A(H,{class:x.value,name:u.icon})),u.label!==void 0&&d.push(u.label),A(b.value,{...m.value},ue(y.default,d))}}}),Pe={key:0,class:"text-center q-pa-lg"},je={key:1,class:"text-center q-pa-lg"},Ee={class:"text-body2 text-grey-6 q-mt-sm"},Qe={key:2,class:"row justify-center"},Ue={class:"col-12 col-lg-10"},Fe={class:"row q-gutter-lg"},Me={class:"col-12 col-md-8"},Je={class:"row items-center"},Oe={class:"col"},He={class:"text-h5 text-primary q-mb-xs"},Ke={class:"text-subtitle1 text-grey-7"},We={class:"col-auto"},Ze={class:"text-center text-caption q-mt-xs"},Ge={class:"q-mt-md"},Xe={class:"text-h6 q-mb-md"},Ye={class:"q-mb-md"},et={class:"text-body2"},tt={class:"q-mb-md"},at={class:"text-body2"},st={key:0,class:"q-mb-md"},lt={class:"text-body2"},ot={class:"text-h6 q-mb-md"},nt={class:"row q-gutter-sm"},rt={class:"row items-center justify-between q-mb-md"},it={class:"text-h6"},ut={key:0,class:"text-center q-pa-md"},dt={key:1,class:"text-center q-pa-md text-grey-6"},ct={key:2},_t={class:"text-caption text-grey-6"},mt={key:0,class:"text-center q-mt-md"},vt={class:"col-12 col-md-4"},pt={class:"text-center q-mb-md"},ft={class:"text-h4 text-primary"},gt={class:"text-center q-mb-lg"},yt={class:"text-h5 text-secondary"},bt={class:"text-caption text-grey-6 text-center q-mt-md"},xt={key:3,class:"text-center q-pa-lg"},qt=de({__name:"[id]",setup(u){const y=ce(),b=_e(),w=Re(),C=me(),s=T(null),m=T([]),x=T(!1),d=T(!1),q=T(null),$=T(!1),c=B(()=>{const n=y.params.id;return typeof n=="string"?parseInt(n):Array.isArray(n)?parseInt(n[0]):0}),S=async()=>{if(!c.value){q.value="無效的看護師 ID";return}x.value=!0,q.value=null;try{s.value=await w.getCaregiverById(c.value),s.value&&Se(`${s.value.name} - 護理服務平台`,`查看 ${s.value.name} 的詳細資歷、專業技能和用戶評價`),await I()}catch(n){console.error("載入看護師資料失敗:",n),q.value=n.message||"載入失敗，請稍後再試"}finally{x.value=!1}},I=async()=>{if(c.value){d.value=!0;try{m.value=await w.getReviewsByCaregiver(c.value)}catch(n){console.error("載入評價失敗:",n)}finally{d.value=!1}}},P=()=>{if(!C.currentUser){b.notify({type:"warning",message:"請先登入才能進行預約",timeout:3e3}),D("/auth/login");return}s.value&&D({path:"/booking/create",query:{caregiverId:s.value.id}})},K=()=>{s.value&&b.dialog({title:"聯繫看護師",message:`您可以透過以下方式聯繫 ${s.value.name}：

電話：0987-654-321
電子郵件：${s.value.name.toLowerCase()}@care-platform.com`,ok:{color:"primary",label:"確定"}})},W=()=>{if(!C.currentUser){b.notify({type:"warning",message:"請先登入才能收藏看護師",timeout:3e3});return}$.value=!$.value,b.notify({type:"positive",message:$.value?"已加入收藏":"已取消收藏",timeout:2e3})},E=n=>new Date(n).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"});ve(()=>{S()});const{$route:Z}=pe(),G=fe().public.baseUrl||"";return ge(s,n=>{n&&ye({script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Person",name:n.name,jobTitle:"專業看護師",description:n.description||n.experience,address:{"@type":"PostalAddress",addressLocality:n.location},aggregateRating:{"@type":"AggregateRating",ratingValue:n.rating,reviewCount:n.review_count||12,bestRating:5,worstRating:1},url:G+Z.fullPath})}]})}),(n,t)=>{const X=Te,f=H,k=be,j=De,Y=Le,Q=Ae,N=Be,z=qe,R=xe,ee=Ne,v=Ce,g=we,V=he,U=ke,te=$e,ae=Ve;return i(),h(ae,{class:"q-pa-md"},{default:a(()=>[x.value?(i(),p("div",Pe,[e(X,{size:"50px",color:"primary"}),t[3]||(t[3]=l("div",{class:"text-body2 q-mt-md"},"載入中...",-1))])):q.value?(i(),p("div",je,[e(f,{name:"error_outline",size:"80px",color:"negative"}),t[5]||(t[5]=l("div",{class:"text-h6 q-mt-md text-negative"},"載入失敗",-1)),l("div",Ee,r(q.value),1),e(k,{flat:"",color:"primary",onClick:S,class:"q-mt-md"},{default:a(()=>t[4]||(t[4]=[o(" 重新載入 ",-1)])),_:1,__:[4]})])):s.value?(i(),p("div",Qe,[l("div",Ue,[e(Y,{class:"q-mb-lg"},{default:a(()=>[e(j,{icon:"home",to:"/",label:"首頁"}),e(j,{to:"/caregivers",label:"看護師列表"}),e(j,{label:s.value.name},null,8,["label"])]),_:1}),l("div",Fe,[l("div",Me,[e(R,{flat:"",bordered:"",class:"q-mb-lg"},{default:a(()=>[e(z,null,{default:a(()=>[l("div",Je,[l("div",Oe,[l("div",He,r(s.value.name),1),l("div",Ke,r(s.value.specialization||"專業看護師"),1)]),l("div",We,[e(Q,{modelValue:s.value.rating,"onUpdate:modelValue":t[0]||(t[0]=_=>s.value.rating=_),size:"2em",max:5,color:"orange",readonly:""},null,8,["modelValue"]),l("div",Ze,r(s.value.rating)+"/5 (基於 "+r(s.value.review_count||12)+" 則評價) ",1)])]),l("div",Ge,[s.value.available?(i(),h(N,{key:0,color:"positive","text-color":"white",icon:"check_circle",size:"sm"},{default:a(()=>t[6]||(t[6]=[o(" 目前可預約 ",-1)])),_:1,__:[6]})):(i(),h(N,{key:1,color:"negative","text-color":"white",icon:"schedule",size:"sm"},{default:a(()=>t[7]||(t[7]=[o(" 目前不可預約 ",-1)])),_:1,__:[7]})),s.value.location?(i(),h(N,{key:2,outline:"",color:"primary",icon:"location_on",size:"sm"},{default:a(()=>[o(r(s.value.location),1)]),_:1})):L("",!0),s.value.experience_years?(i(),h(N,{key:3,outline:"",color:"secondary",icon:"work",size:"sm"},{default:a(()=>[o(r(s.value.experience_years||5)+" 年經驗 ",1)]),_:1})):L("",!0)])]),_:1})]),_:1}),e(R,{flat:"",bordered:"",class:"q-mb-lg"},{default:a(()=>[e(z,null,{default:a(()=>[l("div",Xe,[e(f,{name:"psychology",class:"q-mr-sm"}),t[8]||(t[8]=o(" 專業經驗與技能 ",-1))]),l("div",Ye,[t[9]||(t[9]=l("div",{class:"text-subtitle2 q-mb-sm"},"工作經驗",-1)),l("div",et,r(s.value.experience),1)]),l("div",tt,[t[10]||(t[10]=l("div",{class:"text-subtitle2 q-mb-sm"},"專業技能",-1)),l("div",at,r(s.value.skills),1)]),s.value.description?(i(),p("div",st,[t[11]||(t[11]=l("div",{class:"text-subtitle2 q-mb-sm"},"個人簡介",-1)),l("div",lt,r(s.value.description||"我是一位專業的看護師，擁有豐富的照護經驗和專業技能。我致力於為每位患者提供最優質的照護服務，確保他們的健康和安全。"),1)])):L("",!0)]),_:1})]),_:1}),e(R,{flat:"",bordered:"",class:"q-mb-lg"},{default:a(()=>[e(z,null,{default:a(()=>[l("div",ot,[e(f,{name:"verified",class:"q-mr-sm"}),t[12]||(t[12]=o(" 證照資格 ",-1))]),l("div",nt,[(i(!0),p(F,null,M(s.value.licenses,_=>(i(),h(N,{key:_,color:"blue-1","text-color":"blue-8",icon:"verified_user"},{default:a(()=>[o(r(_),1)]),_:2},1024))),128))])]),_:1})]),_:1}),e(R,{flat:"",bordered:"",class:"q-mb-lg"},{default:a(()=>[e(z,null,{default:a(()=>[l("div",rt,[l("div",it,[e(f,{name:"rate_review",class:"q-mr-sm"}),t[13]||(t[13]=o(" 用戶評價 ",-1))]),e(k,{flat:"",color:"primary",onClick:I,loading:d.value},{default:a(()=>t[14]||(t[14]=[o(" 更新評價 ",-1)])),_:1,__:[14]},8,["loading"])]),d.value?(i(),p("div",ut,[e(ee,{size:"30px",color:"primary"})])):m.value.length===0?(i(),p("div",dt," 尚無評價 ")):(i(),p("div",ct,[e(U,null,{default:a(()=>[(i(!0),p(F,null,M(m.value.slice(0,3),_=>(i(),h(V,{key:_.id,class:"q-pa-md"},{default:a(()=>[e(g,null,{default:a(()=>[e(v,{class:"row items-center q-mb-xs"},{default:a(()=>[e(Q,{"model-value":_.rating,size:"1em",max:5,color:"orange",readonly:"",class:"q-mr-sm"},null,8,["model-value"]),l("span",_t,r(E(_.created_at)),1)]),_:2},1024),e(v,{class:"text-body2"},{default:a(()=>[o(r(_.comment),1)]),_:2},1024),e(v,{caption:"",class:"text-grey-6"},{default:a(()=>[o(" 由 "+r(_.user_name||"匯名用戶")+" 提供 ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),m.value.length>3?(i(),p("div",mt,[e(k,{flat:"",color:"primary",onClick:t[1]||(t[1]=_=>("navigateTo"in n?n.navigateTo:J(D))(`/support/reviews?caregiverId=${s.value.id}`))},{default:a(()=>[o(" 查看全部 "+r(m.value.length)+" 則評價 ",1)]),_:1})])):L("",!0)]))]),_:1})]),_:1})]),l("div",vt,[e(R,{flat:"",bordered:"",class:"q-mb-lg sticky-card"},{default:a(()=>[e(z,null,{default:a(()=>[t[18]||(t[18]=l("div",{class:"text-h6 q-mb-md text-center"},"服務價格",-1)),l("div",pt,[l("div",ft," NT$ "+r(s.value.hourly_rate),1),t[15]||(t[15]=l("div",{class:"text-caption text-grey-6"},"每小時",-1))]),l("div",gt,[l("div",yt," NT$ "+r(s.value.shift_rate),1),t[16]||(t[16]=l("div",{class:"text-caption text-grey-6"},"每班 (早/晚班 8小時)",-1))]),e(te,{class:"q-mb-md"}),e(k,{color:"primary",size:"lg",class:"full-width q-mb-sm",icon:"calendar_today",disable:!s.value.available,onClick:P},{default:a(()=>[o(r(s.value.available?"立即預約":"目前不可預約"),1)]),_:1},8,["disable"]),e(k,{flat:"",color:"secondary",class:"full-width q-mb-sm",icon:"message",onClick:K},{default:a(()=>t[17]||(t[17]=[o(" 聯繫看護師 ",-1)])),_:1,__:[17]}),e(k,{flat:"",color:"grey",class:"full-width",icon:"favorite_border",onClick:W},{default:a(()=>[o(r($.value?"取消收藏":"收藏看護師"),1)]),_:1}),l("div",bt," 最後更新："+r(E(s.value.updated_at)),1)]),_:1,__:[18]})]),_:1}),e(R,{flat:"",bordered:""},{default:a(()=>[e(z,null,{default:a(()=>[t[24]||(t[24]=l("div",{class:"text-h6 q-mb-md"},"快速資訊",-1)),e(U,{dense:""},{default:a(()=>[e(V,null,{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(f,{name:"location_on",color:"primary"})]),_:1}),e(g,null,{default:a(()=>[e(v,null,{default:a(()=>t[19]||(t[19]=[o("服務地區",-1)])),_:1,__:[19]}),e(v,{caption:""},{default:a(()=>[o(r(s.value.location||"未提供"),1)]),_:1})]),_:1})]),_:1}),e(V,null,{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(f,{name:"schedule",color:"primary"})]),_:1}),e(g,null,{default:a(()=>[e(v,null,{default:a(()=>t[20]||(t[20]=[o("可用狀態",-1)])),_:1,__:[20]}),e(v,{caption:""},{default:a(()=>[o(r(s.value.available?"目前可預約":"目前不可預約"),1)]),_:1})]),_:1})]),_:1}),e(V,null,{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(f,{name:"work",color:"primary"})]),_:1}),e(g,null,{default:a(()=>[e(v,null,{default:a(()=>t[21]||(t[21]=[o("工作經驗",-1)])),_:1,__:[21]}),e(v,{caption:""},{default:a(()=>[o(r(s.value.experience_years||5)+" 年",1)]),_:1})]),_:1})]),_:1}),e(V,null,{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(f,{name:"language",color:"primary"})]),_:1}),e(g,null,{default:a(()=>[e(v,null,{default:a(()=>t[22]||(t[22]=[o("語言能力",-1)])),_:1,__:[22]}),e(v,{caption:""},{default:a(()=>t[23]||(t[23]=[o("中文、台語",-1)])),_:1,__:[23]})]),_:1})]),_:1})]),_:1})]),_:1,__:[24]})]),_:1})])])])])):(i(),p("div",xt,[e(f,{name:"person_search",size:"80px",color:"grey-5"}),t[26]||(t[26]=l("div",{class:"text-h6 q-mt-md text-grey-7"},"找不到看護師資訊",-1)),t[27]||(t[27]=l("div",{class:"text-body2 text-grey-6 q-mt-sm"}," 請確認看護師 ID 是否正確 ",-1)),e(k,{flat:"",color:"primary",onClick:t[2]||(t[2]=_=>("navigateTo"in n?n.navigateTo:J(D))("/caregivers")),class:"q-mt-md"},{default:a(()=>t[25]||(t[25]=[o(" 返回看護師列表 ",-1)])),_:1,__:[25]})]))]),_:1})}}}),Tt=ze(qt,[["__scopeId","data-v-03f0c809"]]);export{Tt as default};
