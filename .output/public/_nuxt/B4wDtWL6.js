import{v as L,u as Q,y as E,A as u,R as G,a1 as W,ai as X,q as Y,p as Z,c as R,o as r,w as n,e as l,a as s,J as m,l as c,j as ee,t as te,D as le,aN as ae,f as oe,aj as se,b as ne,d as ie,ak as re,K as S,L as w,C as A,al as $,_ as ue}from"./DLx3-ifv.js";import{u as de}from"./Bs_-0E3x.js";import{C as H}from"./C-s1-Qrp.js";import{_ as me}from"./Oc49emid.js";import{_ as ce}from"./Yqo6pqZJ.js";import{_ as ve}from"./C5go2q6Y.js";import{_ as _e}from"./DlcMHTQ2.js";import{_ as pe}from"./CSiiy5fn.js";import"./BFiq8LBz.js";const fe={class:"row justify-between items-center q-mb-lg"},ge={class:"text-h5 text-primary"},ye={class:"text-caption text-grey-6"},xe={class:"row q-gutter-md q-mb-lg"},be={class:"col-12 col-md-8"},he={class:"col-12 col-md-4"},qe={class:"row q-gutter-md"},Re={class:"col-12 col-sm-6 col-md-3"},ke={class:"col-12 col-sm-6 col-md-3"},Ce={class:"col-12 col-sm-6 col-md-3"},Ve={class:"col-12 col-sm-6 col-md-3"},Se={class:"row q-gutter-md q-mt-md"},we={class:"col-12"},Ae={class:"row q-gutter-md q-mt-md"},$e={class:"col"},He={class:"col-auto"},Ue={key:0,class:"text-center q-pa-lg"},Fe={key:1,class:"text-center q-pa-lg"},Ne={key:2,class:"caregiver-list"},Te={key:3},je={class:"caregiver-list"},ze=L({__name:"search",setup(Be){Q("搜尋看護師 - 護理服務平台","快速搜尋專業看護師，找到最適合的照護服務");const b=E(),f=de(),d=u(""),i=u([]),k=u([]),v=u(!1),g=u(!1),y=u(!1),t=u({location:"",minRating:null,maxHourlyRate:null,maxShiftRate:null,skills:[]}),U=[{label:"台北市",value:"台北"},{label:"新北市",value:"新北"},{label:"桃園市",value:"桃園"},{label:"台中市",value:"台中"},{label:"台南市",value:"台南"},{label:"高雄市",value:"高雄"}],F=["專業照護","失智症照護","復健協助","夜間照護","用藥管理","營養調理","心理支持","物理治療","語言治療","職能治療"],h=G(()=>t.value.location||t.value.minRating!==null||t.value.maxHourlyRate!==null||t.value.maxShiftRate!==null||t.value.skills.length>0),_=async()=>{if(!d.value.trim()&&!h.value){i.value=[],g.value=!1;return}v.value=!0,g.value=!0;try{let o=[];if(d.value.trim())o=await f.searchCaregivers(d.value.trim());else{const e=await f.getCaregivers(1,100);o=Array.isArray(e)?e:e.data||[]}h.value&&(o=await f.filterCaregivers({...t.value,...t.value.minRating&&{minRating:t.value.minRating},...t.value.maxHourlyRate&&{maxHourlyRate:t.value.maxHourlyRate},...t.value.maxShiftRate&&{maxShiftRate:t.value.maxShiftRate}})),i.value=Array.isArray(o)?o:[],i.value.length===0?b.notify({type:"info",message:"沒有找到符合條件的看護師，請嘗試調整搜尋條件",timeout:3e3}):b.notify({type:"positive",message:`找到 ${i.value.length} 位符合條件的看護師`,timeout:2e3})}catch(o){console.error("搜尋失敗:",o),b.notify({type:"negative",message:o.message||"搜尋失敗，請稍後再試",timeout:3e3})}finally{v.value=!1}},N=()=>{_(),y.value=!1},C=()=>{t.value={location:"",minRating:null,maxHourlyRate:null,maxShiftRate:null,skills:[]},_()},T=()=>{d.value="",i.value=[],g.value=!1,C()},j=async()=>{try{const o=await f.getFeaturedCaregivers();k.value=Array.isArray(o)?o:o.data||[]}catch(o){console.error("載入推薦看護師失敗:",o)}};W(()=>{j()});const{$route:z}=X(),B=Y().public.baseUrl||"";return Z({script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"SearchResultsPage",name:"搜尋看護師 - 護理服務平台",url:B+z.fullPath,description:"快速搜尋專業看護師，找到最適合的照護服務",provider:{"@type":"Organization",name:"護理服務平台"}})}]}),(o,e)=>{const q=ee,M=me,p=oe,x=le,V=ve,O=ie,D=ne,K=ce,P=_e,I=pe;return r(),R(I,{class:"q-pa-md"},{default:n(()=>[l("div",fe,[l("div",ge,[s(q,{name:"search",size:"md",class:"q-mr-sm"}),e[7]||(e[7]=c(" 搜尋看護師 ",-1))]),l("div",ye," 共找到 "+te(i.value.length)+" 位看護師 ",1)]),l("div",xe,[l("div",be,[s(x,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),label:"搜尋看護師 (姓名、技能、地區、證照)",outlined:"",dense:"",clearable:"",loading:v.value,onInput:_,onKeyup:ae(_,["enter"]),placeholder:"例如：林護理師、復健、台北、護理師證照"},{prepend:n(()=>[s(q,{name:"search"})]),append:n(()=>[s(p,{flat:"",dense:"",icon:"tune",onClick:e[0]||(e[0]=a=>y.value=!y.value),color:h.value?"primary":"grey"},{default:n(()=>[s(M,null,{default:n(()=>e[8]||(e[8]=[c("進階篩選",-1)])),_:1,__:[8]})]),_:1},8,["color"])]),_:1},8,["modelValue","loading"])]),l("div",he,[s(p,{color:"primary",icon:"search",loading:v.value,onClick:_,class:"full-width"},{default:n(()=>e[9]||(e[9]=[c(" 搜尋 ",-1)])),_:1,__:[9]},8,["loading"])])]),s(K,null,{default:n(()=>[se(s(D,{flat:"",bordered:"",class:"q-mb-lg"},{default:n(()=>[s(O,null,{default:n(()=>[e[12]||(e[12]=l("div",{class:"text-h6 q-mb-md"},"進階篩選",-1)),l("div",qe,[l("div",Re,[s(V,{modelValue:t.value.location,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.location=a),options:U,label:"服務地區",outlined:"",dense:"",clearable:"","emit-value":"","map-options":""},null,8,["modelValue"])]),l("div",ke,[s(x,{modelValue:t.value.minRating,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.minRating=a),modelModifiers:{number:!0},type:"number",label:"最低評分",outlined:"",dense:"",min:"1",max:"5",step:"0.1"},null,8,["modelValue"])]),l("div",Ce,[s(x,{modelValue:t.value.maxHourlyRate,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.maxHourlyRate=a),modelModifiers:{number:!0},type:"number",label:"最高時薪",outlined:"",dense:"",min:"0",suffix:"元/小時"},null,8,["modelValue"])]),l("div",Ve,[s(x,{modelValue:t.value.maxShiftRate,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.maxShiftRate=a),modelModifiers:{number:!0},type:"number",label:"最高班薪",outlined:"",dense:"",min:"0",suffix:"元/班"},null,8,["modelValue"])])]),l("div",Se,[l("div",we,[s(V,{modelValue:t.value.skills,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.skills=a),options:F,label:"專業技能",outlined:"",dense:"",multiple:"","use-chips":"",clearable:""},null,8,["modelValue"])])]),l("div",Ae,[l("div",$e,[s(p,{flat:"",color:"grey",onClick:C},{default:n(()=>e[10]||(e[10]=[c(" 清除篩選 ",-1)])),_:1,__:[10]})]),l("div",He,[s(p,{color:"primary",onClick:N},{default:n(()=>e[11]||(e[11]=[c(" 套用篩選 ",-1)])),_:1,__:[11]})])])]),_:1,__:[12]})]),_:1},512),[[re,y.value]])]),_:1}),v.value?(r(),m("div",Ue,[s(P,{size:"50px",color:"primary"}),e[13]||(e[13]=l("div",{class:"text-body2 q-mt-md"},"搜尋中...",-1))])):i.value.length===0&&g.value?(r(),m("div",Fe,[s(q,{name:"search_off",size:"80px",color:"grey-5"}),e[15]||(e[15]=l("div",{class:"text-h6 q-mt-md text-grey-7"},"沒有找到符合條件的看護師",-1)),e[16]||(e[16]=l("div",{class:"text-body2 text-grey-6 q-mt-sm"}," 請嘗試調整搜尋關鍵字或篩選條件 ",-1)),s(p,{flat:"",color:"primary",onClick:T,class:"q-mt-md"},{default:n(()=>e[14]||(e[14]=[c(" 清除搜尋 ",-1)])),_:1,__:[14]})])):i.value.length>0?(r(),m("div",Ne,[(r(!0),m(S,null,w(i.value,a=>(r(),R(H,{key:a.id,caregiver:a,onClick:J=>("navigateTo"in o?o.navigateTo:A($))(`/caregivers/${a.id}`)},null,8,["caregiver","onClick"]))),128))])):(r(),m("div",Te,[e[17]||(e[17]=l("div",{class:"text-h6 q-mb-md text-grey-7"},"推薦看護師",-1)),l("div",je,[(r(!0),m(S,null,w(k.value,a=>(r(),R(H,{key:a.id,caregiver:a,onClick:J=>("navigateTo"in o?o.navigateTo:A($))(`/caregivers/${a.id}`)},null,8,["caregiver","onClick"]))),128))])]))]),_:1})}}}),Ge=ue(ze,[["__scopeId","data-v-5195190f"]]);export{Ge as default};
